<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó—î—Ñ–∞–ë—É—Ä–≥—î—Ä: 3D –ê—Ç–∞–∫–∞ –ß—ñ–∫—î–Ω–ó—î—Ñ–∞ (FPS –Ü–º—ñ—Ç–∞—Ü—ñ—è)</title>
    <style>
        /* ======================================= */
        /* –ë–ê–ó–û–í–Ü –°–¢–ò–õ–Ü */
        /* ======================================= */
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background-color: #2c3e50;
            color: #ecf0f1;
            text-align: center;
            margin: 0;
            padding: 0;
        }

        .game-container {
            width: 100%;
            max-width: 900px;
            margin: 20px auto;
            border: 5px solid #e74c3c;
            border-radius: 15px;
            background-color: #34495e;
            padding: 20px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
            min-height: 700px;
            position: relative;
        }

        .menu-button {
            padding: 15px 30px;
            margin: 10px;
            font-size: 24px;
            cursor: pointer;
            border: none;
            border-radius: 10px;
            transition: transform 0.1s;
        }

        .screen {
            display: none;
            padding: 20px 0;
            min-height: 500px;
            text-align: left;
        }
        
        /* –°—Ç–∞—Ç—É—Å –±–∞—Ä */
        .status-bar {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 10px;
            border-radius: 5px;
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-around;
        }
        .status-bar span { font-weight: bold; color: #f1c40f; }

        /* ======================================= */
        /* –î–†–ê–ö–ê (3D/FPS –Ü–ú–Ü–¢–ê–¶–Ü–Ø) –°–¢–ò–õ–Ü */
        /* ======================================= */
        #draka-screen {
            background-color: #1abc9c; /* –ë–∞–∑–æ–≤–∏–π –∫–æ–ª—ñ—Ä –ø–æ–ª—è–Ω–∏ */
            perspective: 600px; /* –°—Ç–≤–æ—Ä—é—î 3D –ø—Ä–æ—Å—Ç—ñ—Ä */
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            height: 500px; /* –í–∏—Å–æ—Ç–∞ "—Å–≤—ñ—Ç—É" */
        }
        
        #game-view {
            width: 100%;
            height: 100%;
            position: absolute;
            transform-style: preserve-3d; /* –î–æ–∑–≤–æ–ª—è—î –¥–æ—á—ñ—Ä–Ω—ñ–º –µ–ª–µ–º–µ–Ω—Ç–∞–º –±—É—Ç–∏ –≤ 3D */
            transition: transform 0.1s ease-out; /* –ü–ª–∞–≤–Ω–∏–π —Ä—É—Ö –≥—Ä–∞–≤—Ü—è */
        }

        /* 3D –§–û–ù */
        .background-3d {
            position: absolute;
            width: 200%; 
            height: 100%;
            left: -50%; 
            bottom: 0;
            /* –Ü–º—ñ—Ç–∞—Ü—ñ—è 3D –æ—Ç–æ—á–µ–Ω–Ω—è (–ì–æ—Ä–∏ —Ç–∞ –¢—Ä–∞–≤–∞) */
            background: 
                url('https://i.imgur.com/L1d6P2G.png') repeat-x bottom / 1000px 100px, /* –ì–æ—Ä–∏ (—ñ–º—ñ—Ç–∞—Ü—ñ—è) */
                linear-gradient(to top, #27ae60 50%, #3498db 100%); /* –¢—Ä–∞–≤–∞ —Ç–∞ –ù–µ–±–æ */
            transform: translateZ(-300px); /* –í—ñ–¥–¥–∞–ª—è—î —Ñ–æ–Ω */
            transform-origin: bottom center;
            z-index: 1;
        }

        /* 3D –°–¢–Ü–ù–ò */
        .wall {
            position: absolute;
            bottom: 0;
            height: 100%;
            width: 150px; 
            background-color: #95a5a6;
            box-shadow: inset 0 0 20px #2c3e50;
            transform-origin: center;
            z-index: 10;
        }
        #wall-left {
            left: 0;
            transform: rotateY(90deg) translateZ(-75px);
        }
        #wall-right {
            right: 0;
            transform: rotateY(-90deg) translateZ(-75px);
        }

        /* –ó–ï–§–ê (–ì—Ä–∞–≤–µ—Ü—å - –ü–µ—Ä—à–µ –û–±–ª–∏—á—á—è) */
        #player {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translate(-50%, 0);
            width: 150px;
            height: 100px;
            background-color: transparent; /* –ì—Ä–∞–≤–µ—Ü—å –Ω–µ–≤–∏–¥–∏–º–∏–π */
            z-index: 50;
        }
        
        /* –ó–±—Ä–æ—è (—ñ–º—ñ—Ç–∞—Ü—ñ—è –±—É—Ä–≥–µ—Ä–Ω–æ—ó –≥–∞—Ä–º–∞—Ç–∏) */
        #weapon {
            position: absolute;
            bottom: 5px;
            right: 0;
            width: 50px;
            height: 30px;
            background-color: #e67e22;
            border-radius: 5px;
            border: 3px solid #d35400;
            transition: transform 0.05s;
        }

        /* –í–û–†–û–ì–ò - 2D, –∞–ª–µ "—É 3D –ø—Ä–æ—Å—Ç–æ—Ä—ñ" */
        .chicken-zefa {
            position: absolute;
            width: 60px; /* –í–æ—Ä–æ–≥–∏ –±—ñ–ª—å—à—ñ –¥–ª—è –≤–∏–¥–∏–º–æ—Å—Ç—ñ */
            height: 60px;
            background-image: url('zefaburgerchickenzefa.png'); 
            background-size: cover;
            transform-origin: bottom center;
            /* transform: translateZ(...) - –±—É–¥–µ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏—Å—è JS */
            z-index: 20;
            transition: opacity 0.2s; /* –î–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –∑–Ω–∏–∫–Ω–µ–Ω–Ω—è */
            
            /* –Ü–º—ñ—Ç–∞—Ü—ñ—è —Ç—ñ–Ω—ñ */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        /* –ë–£–†–ì–ï–†–ò - 2D, –∞–ª–µ "—É 3D –ø—Ä–æ—Å—Ç–æ—Ä—ñ" */
        .burger {
            position: absolute;
            width: 25px;
            height: 25px;
            background-color: #f39c12; 
            border-radius: 50%;
            border: 3px solid #e67e22;
            z-index: 30;
            /* transform: translateZ(...) - –±—É–¥–µ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏—Å—è JS */
        }

    </style>
</head>
<body>

    <div class="game-container">
        <h1>–ó—î—Ñ–∞–ë—É—Ä–≥—î—Ä: 3D –ê—Ç–∞–∫–∞ –ß—ñ–∫—î–Ω–ó—î—Ñ–∞</h1>

        <div id="main-menu" class="screen" style="display: block;">
            <h2>–ì–æ–ª–æ–≤–Ω–µ –ú–µ–Ω—é</h2>
            <div class="status-bar">
                <span>–ì—Ä–æ—à—ñ: $<span id="money">100</span></span>
                <span>–ë—É—Ä–≥–µ—Ä–∏: <span id="burgers">5</span></span>
                <span>–ó–¥–æ—Ä–æ–≤'—è: <span id="health">100</span></span>
            </div>
            <button id="magaz-btn" class="menu-button" onclick="showScreen('magaz-screen')">üõí –ú–∞–≥–∞–∑</button>
            <button id="kukhnya-btn" class="menu-button" onclick="showScreen('kukhnya-screen')">üç≥ –ö—É—Ö–Ω—è</button>
            <button id="draka-btn" class="menu-button" onclick="showScreen('draka-screen'); startGame()">üí• –î—Ä–∞–∫–∞</button>
        </div>

        <div id="magaz-screen" class="screen">
            <h2>üõí –ú–∞–≥–∞–∑ –ó—î—Ñ–∞</h2>
            <p>–®–≤–∏–¥–∫—ñ—Å—Ç—å –≥–æ—Ç—É–≤–∞–Ω–Ω—è: –†—ñ–≤–µ–Ω—å <span id="cook-speed-level">1</span> 
               <button onclick="buyUpgrade('cookSpeed', 50)">–ö—É–ø–∏—Ç–∏ (+50$, -1—Å–µ–∫)</button></p>
            
            <p>–ú–∞–∫—Å. –ó–¥–æ—Ä–æ–≤'—è: –†—ñ–≤–µ–Ω—å <span id="health-level">1</span> 
               <button onclick="buyUpgrade('maxHealth', 75)">–ö—É–ø–∏—Ç–∏ (+75$, +20 –ó–î)</button></p>
               
            <p>–î–µ–º–µ–¥–∂ –ë—É—Ä–≥–µ—Ä–∞: –†—ñ–≤–µ–Ω—å <span id="damage-level">1</span> 
               <button onclick="buyUpgrade('damage', 100)">–ö—É–ø–∏—Ç–∏ (+100$, +5 –î–ú–ì)</button></p>

            <h3>–Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏:</h3>
            <p>–ú'—è—Å–æ (–ü–æ—Ç—Ä—ñ–±–Ω–æ: 1): <button onclick="buyIngredient('meat', 10)">–ö—É–ø–∏—Ç–∏ (10$)</button></p>
            <p>–ë—É–ª–æ—á–∫–∏ (–ü–æ—Ç—Ä—ñ–±–Ω–æ: 2): <button onclick="buyIngredient('buns', 5)">–ö—É–ø–∏—Ç–∏ (5$)</button></p>
            
            <p><button class="menu-button" onclick="showScreen('main-menu')">‚Ü©Ô∏è –ù–∞–∑–∞–¥</button></p>
        </div>

        <div id="kukhnya-screen" class="screen">
            <h2>üç≥ –ö—É—Ö–Ω—è –ó—î—Ñ–∞</h2>
            <p>–ú'—è—Å–æ: <span id="inv-meat">0</span> | –ë—É–ª–æ—á–∫–∏: <span id="inv-buns">0</span></p>
            
            <button onclick="cookBurger()" id="cook-btn">
                –ì–æ—Ç—É–≤–∞—Ç–∏ –ë—É—Ä–≥–µ—Ä (–ü–æ—Ç—Ä—ñ–±–Ω–æ: 1 –ú'—è—Å–æ, 2 –ë—É–ª–æ—á–∫–∏)
            </button>
            
            <p id="cooking-status"></p>
            
            <p><button class="menu-button" onclick="showScreen('main-menu')">‚Ü©Ô∏è –ù–∞–∑–∞–¥</button></p>
        </div>

        <div id="draka-screen" class="screen">
            <div class="status-bar">
                <span>–ß–∞—Å: <span id="timer">3:00</span></span>
                <span>–ó–¥–æ—Ä–æ–≤'—è: <span id="player-health">100</span></span>
                <span>–ë—É—Ä–≥–µ—Ä–∏: <span id="fight-burgers">5</span></span>
            </div>
            
            <div id="game-view">
                <div class="background-3d"></div> 
                
                <div id="wall-left" class="wall"></div>
                <div id="wall-right" class="wall"></div>
                
                <div id="player">
                    <div id="weapon">üí•</div> 
                </div>
            </div>
            
            <p style="text-align: center; color: #ecf0f1; margin-top: 10px;">
                –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è: **A/D** (–∞–±–æ —Å—Ç—Ä—ñ–ª–∫–∏) –¥–ª—è –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è, **–ü—Ä–æ–±—ñ–ª/–ö–ª—ñ–∫** –¥–ª—è —Å—Ç—Ä—ñ–ª—å–±–∏.
            </p>

            <p><button class="menu-button" onclick="showScreen('main-menu'); stopGame()">‚Ü©Ô∏è –í—Ç–µ—á–∞ (–ù–∞–∑–∞–¥)</button></p>
        </div>
    </div>

    <script>
        // =======================================
        // –ì–õ–û–ë–ê–õ–¨–ù–Ü –ó–ú–Ü–ù–ù–Ü –Ü–ì–†–ò
        // =======================================
        let gameState = {
            money: 100,
            burgers: 5,
            health: 100,
            maxHealth: 100,
            
            inventory: { meat: 0, buns: 0 },
            
            upgrades: {
                cookSpeed: { level: 1, cost: 50, value: 5000 },
                maxHealth: { level: 1, cost: 75, value: 100 },
                damage: { level: 1, cost: 100, value: 10 }
            },
            
            gameRunning: false,
            chickenZefas: [],
            bullets: [],
            
            // 3D/FPS –ó–º—ñ–Ω–Ω—ñ
            playerX: 0, // –ü–æ–∑–∏—Ü—ñ—è –≥—Ä–∞–≤—Ü—è (–∑—Å—É–≤ —Å–≤—ñ—Ç—É)
            level: 1,
            maxTime: 180, 
            currentTime: 180,
            chickenSpawnRate: 2000, 
            worldRotationY: 0, // –ü–æ—Ç–æ—á–Ω–∏–π –∫—É—Ç –ø–æ–≤–æ—Ä–æ—Ç—É —Å–≤—ñ—Ç—É
            maxWorldRotation: 15, // –ú–∞–∫—Å. –∫—É—Ç –Ω–∞—Ö–∏–ª—É –ø—Ä–∏ –±—ñ–≥—É (–¥–ª—è FPS –µ—Ñ–µ–∫—Ç—É)
        };

        const playerSpeed = 10;
        const bulletSpeed = 25; // –®–≤–∏–¥—à–µ, —â–æ–± –≤–∏–≥–ª—è–¥–∞–ª–æ —è–∫ —Å—Ç—Ä—ñ–ª—å–±–∞

        // =======================================
        // UI —Ç–∞ –ú–ï–ù–Æ –õ–û–ì–Ü–ö–ê
        // =======================================
        function updateUI() {
            document.getElementById('money').textContent = gameState.money;
            document.getElementById('burgers').textContent = gameState.burgers;
            document.getElementById('health').textContent = gameState.health;
            document.getElementById('player-health').textContent = gameState.health;
            document.getElementById('fight-burgers').textContent = gameState.burgers;

            document.getElementById('inv-meat').textContent = gameState.inventory.meat;
            document.getElementById('inv-buns').textContent = gameState.inventory.buns;
            
            document.getElementById('cook-speed-level').textContent = gameState.upgrades.cookSpeed.level;
            document.getElementById('health-level').textContent = gameState.upgrades.maxHealth.level;
            document.getElementById('damage-level').textContent = gameState.upgrades.damage.level;
        }

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.style.display = 'none';
            });
            document.getElementById(screenId).style.display = 'block';
            updateUI();
        }
        
        // --- –ú–ê–ì–ê–ó –Ü –ö–£–•–ù–Ø (–õ–æ–≥—ñ–∫–∞ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –≤–µ—Ä—Å—ñ—ó) ---
        function buyIngredient(item, cost) {
            if (gameState.money >= cost) {
                gameState.money -= cost;
                gameState.inventory[item]++;
                updateUI();
                alert(`–ö—É–ø–ª–µ–Ω–æ ${item}!`);
            } else { alert("–ù–µ –≤–∏—Å—Ç–∞—á–∞—î –≥—Ä–æ—à–µ–π –ó—î—Ñ–∞!"); }
        }
        
        function buyUpgrade(type, baseCost) {
             let upgrade = gameState.upgrades[type];
            let cost = baseCost * upgrade.level;
            
            if (gameState.money >= cost) {
                gameState.money -= cost;
                upgrade.level++;
                
                if (type === 'maxHealth') { upgrade.value += 20; gameState.maxHealth = upgrade.value; gameState.health = Math.min(gameState.health, gameState.maxHealth); } 
                else if (type === 'cookSpeed') { upgrade.value = Math.max(500, upgrade.value - 500); } 
                else if (type === 'damage') { upgrade.value += 5; }

                updateUI();
                alert(`–ü–æ–∫—Ä–∞—â–µ–Ω–æ ${type}! –ù–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å: ${upgrade.level}`);
            } else { alert("–ù–µ –≤–∏—Å—Ç–∞—á–∞—î –≥—Ä–æ—à–µ–π –ó—î—Ñ–∞ –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è!"); }
        }

        function cookBurger() {
            const reqMeat = 1;
            const reqBuns = 2;
            
            if (gameState.inventory.meat >= reqMeat && gameState.inventory.buns >= reqBuns) {
                const cookTime = gameState.upgrades.cookSpeed.value;
                const cookBtn = document.getElementById('cook-btn');
                const status = document.getElementById('cooking-status');

                cookBtn.disabled = true;
                status.textContent = `–ì–æ—Ç—É–≤–∞–Ω–Ω—è... (${cookTime/1000} —Å–µ–∫)`;

                setTimeout(() => {
                    gameState.inventory.meat -= reqMeat;
                    gameState.inventory.buns -= reqBuns;
                    gameState.burgers += 1;
                    status.textContent = "–ë—É—Ä–≥–µ—Ä –≥–æ—Ç–æ–≤–∏–π! üçî";
                    cookBtn.disabled = false;
                    updateUI();
                }, cookTime);
            } else { alert("–ù–µ –≤–∏—Å—Ç–∞—á–∞—î —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤ –ó—î—Ñ–∞! –ö—É–ø—É–π —É –º–∞–≥–∞–∑—ñ."); }
        }

        // =======================================
        // 3D/FPS –ë–û–ô–û–í–ê –õ–û–ì–Ü–ö–ê
        // =======================================
        let gameLoopInterval, timerInterval, spawnInterval;

        function startGame() {
            if (gameState.burgers === 0) {
                alert("–ù–µ–º–∞—î –±—É—Ä–≥–µ—Ä—ñ–≤! –ì–æ—Ç—É–π –Ω–∞ –∫—É—Ö–Ω—ñ!");
                showScreen('main-menu');
                return;
            }
            if (gameState.gameRunning) return;
            
            gameState.gameRunning = true;
            gameState.health = gameState.maxHealth;
            gameState.currentTime = gameState.maxTime;
            gameState.chickenZefas.forEach(zefa => zefa.element.remove());
            gameState.bullets.forEach(bullet => bullet.element.remove());
            gameState.chickenZefas = [];
            gameState.bullets = [];
            
            // –°–∫–∏–¥–∞–Ω–Ω—è 3D –ø–æ–∑–∏—Ü—ñ—ó
            gameState.playerX = 0; 
            gameState.worldRotationY = 0;
            document.getElementById('game-view').style.transform = `translateX(${gameState.playerX}px) rotateY(${gameState.worldRotationY}deg)`;

            timerInterval = setInterval(updateTimer, 1000);
            spawnInterval = setInterval(spawnChickenZefa, gameState.chickenSpawnRate / gameState.level); 
            gameLoopInterval = setInterval(gameLoop, 30); 
            
            document.addEventListener('keydown', handleInput);
            document.getElementById('draka-screen').addEventListener('click', shootBurger);
        }
        
        function stopGame(message = "–ë—ñ–π –∑–∞–∫—ñ–Ω—á–µ–Ω–æ.") {
            gameState.gameRunning = false;
            clearInterval(gameLoopInterval);
            clearInterval(timerInterval);
            clearInterval(spawnInterval);
            
            gameState.chickenZefas.forEach(zefa => zefa.element.remove());
            gameState.bullets.forEach(bullet => bullet.element.remove());
            gameState.chickenZefas = [];
            gameState.bullets = [];

            document.removeEventListener('keydown', handleInput);
            document.getElementById('draka-screen').removeEventListener('click', shootBurger);
            
            alert(message);
        }

        function updateTimer() {
            gameState.currentTime--;
            const minutes = Math.floor(gameState.currentTime / 60);
            const seconds = gameState.currentTime % 60;
            document.getElementById('timer').textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;

            if (gameState.currentTime <= 0) {
                stopGame("–ü–ï–†–ï–ú–û–ì–ê –ó–Ñ–§–ê! –¢–∏ –≤–∏—Å—Ç–æ—è–≤ 3 —Ö–≤–∏–ª–∏–Ω–∏!");
                gameState.level++;
                gameState.money += 200 * gameState.level;
                showScreen('main-menu');
            }
        }

        function spawnChickenZefa() {
            if (!gameState.gameRunning) return;

            const zefaEl = document.createElement('div');
            zefaEl.className = 'chicken-zefa';
            
            // –í–æ—Ä–æ–≥–∏ –±—É–¥—É—Ç—å —Å–ø–∞–≤–Ω–∏—Ç–∏—Å—è –Ω–∞ "–≥–ª–∏–±–∏–Ω—ñ" —ñ —Ä—É—Ö–∞—Ç–∏—Å—è –¥–æ 0 (–≥—Ä–∞–≤—Ü—è)
            const zefaDepth = -500; // –ü–æ—á–∞—Ç–∫–æ–≤–∞ –≥–ª–∏–±–∏–Ω–∞
            const zefaX = Math.floor(Math.random() * 400) - 200; // –í–∏–ø–∞–¥–∫–æ–≤–∞ X-–ø–æ–∑–∏—Ü—ñ—è –≤—ñ–¥ -200 –¥–æ 200
            
            zefaEl.style.left = `calc(50% + ${zefaX}px)`;
            zefaEl.style.transform = `translateZ(${zefaDepth}px)`;
            
            const zefa = {
                id: Date.now(),
                element: zefaEl,
                health: 50 * gameState.level,
                x: zefaX,
                z: zefaDepth, // –í—ñ–¥—Å—Ç–∞–Ω—å –≤—ñ–¥ –≥—Ä–∞–≤—Ü—è (–ø–æ—á–∞—Ç–∫–æ–≤–∞ –≥–ª–∏–±–∏–Ω–∞)
                speed: 5 + (gameState.level * 1) 
            };
            
            gameState.chickenZefas.push(zefa);
            document.getElementById('game-view').appendChild(zefaEl);
        }

        function handleInput(event) {
            if (!gameState.gameRunning) return;

            let move = 0;
            if (event.key === 'a' || event.key === 'A' || event.key === 'ArrowLeft') {
                move = playerSpeed;
                gameState.worldRotationY = gameState.maxWorldRotation; // –ù–∞—Ö–∏–ª —Å–≤—ñ—Ç—É
            } else if (event.key === 'd' || event.key === 'D' || event.key === 'ArrowRight') {
                move = -playerSpeed;
                gameState.worldRotationY = -gameState.maxWorldRotation; // –ù–∞—Ö–∏–ª —Å–≤—ñ—Ç—É
            } else if (event.key === ' ') {
                event.preventDefault(); 
                shootBurger();
            }
            
            gameState.playerX += move;
            
            // –û–±–º–µ–∂–µ–Ω–Ω—è —Ä—É—Ö—É –º—ñ–∂ "—Å—Ç—ñ–Ω–∞–º–∏"
            const maxOffset = 150; 
            gameState.playerX = Math.min(maxOffset, Math.max(-maxOffset, gameState.playerX));

            // –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –Ω–∞—Ö–∏–ª—É –¥–æ –Ω—É–ª—è, —è–∫—â–æ –∫–ª–∞–≤—ñ—à–∞ –Ω–µ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∞
            if (move === 0) {
                gameState.worldRotationY = 0;
            }
            
            // –†—É—Ö–∞—î–º–æ —Å–≤—ñ—Ç, –∞ –Ω–µ –≥—Ä–∞–≤—Ü—è (–Ü–ª—é–∑—ñ—è FPS)
            document.getElementById('game-view').style.transform = `translateX(${gameState.playerX}px) rotateY(${gameState.worldRotationY}deg)`;
        }
        
        // –ü–ª–∞–≤–Ω–µ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –Ω–∞—Ö–∏–ª—É –ø—Ä–∏ –≤—ñ–¥–ø—É—Å–∫–∞–Ω–Ω—ñ –∫–ª–∞–≤—ñ—à—ñ
        document.addEventListener('keyup', (event) => {
            if (event.key === 'a' || event.key === 'A' || event.key === 'ArrowLeft' || 
                event.key === 'd' || event.key === 'D' || event.key === 'ArrowRight') {
                gameState.worldRotationY = 0;
                document.getElementById('game-view').style.transform = `translateX(${gameState.playerX}px) rotateY(${gameState.worldRotationY}deg)`;
            }
        });


        function shootBurger() {
            if (!gameState.gameRunning || gameState.burgers <= 0) {
                alert("–ù–µ–º–∞—î –±—É—Ä–≥–µ—Ä—ñ–≤! –ì–æ—Ç—É–π!");
                return;
            }
            
            gameState.burgers--;
            updateUI();
            
            // –ï—Ñ–µ–∫—Ç —Å—Ç—Ä—ñ–ª—å–±–∏
            const weaponEl = document.getElementById('weapon');
            weaponEl.style.transform = 'translateY(-5px)';
            setTimeout(() => { weaponEl.style.transform = 'translateY(0)'; }, 100);

            const burgerEl = document.createElement('div');
            burgerEl.className = 'burger';
            
            // –ë—É—Ä–≥–µ—Ä –∑–∞–≤–∂–¥–∏ –ª–µ—Ç–∏—Ç—å —ñ–∑ —Ü–µ–Ω—Ç—Ä—É –µ–∫—Ä–∞–Ω—É (–ø–µ—Ä—à–µ –æ–±–ª–∏—á—á—è)
            burgerEl.style.left = `calc(50% + ${-gameState.playerX}px)`; // –ö–æ–º–ø–µ–Ω—Å–∞—Ü—ñ—è –∑—Å—É–≤—É —Å–≤—ñ—Ç—É
            burgerEl.style.top = '350px'; // –ü–æ—á–∞—Ç–æ–∫ –ø–æ–ª—å–æ—Ç—É
            
            const bullet = {
                element: burgerEl,
                z: 0, // –ü–æ—á–∞—Ç–∫–æ–≤–∞ –≥–ª–∏–±–∏–Ω–∞ (–Ω–∞ —Ä—ñ–≤–Ω—ñ –≥—Ä–∞–≤—Ü—è)
                damage: gameState.upgrades.damage.value
            };

            gameState.bullets.push(bullet);
            document.getElementById('game-view').appendChild(burgerEl);
        }

        function gameLoop() {
            if (!gameState.gameRunning) return;

            // 1. –†—É—Ö –ß—ñ–∫—î–Ω–ó—î—Ñ–∞ (–∑ –≥–ª–∏–±–∏–Ω–∏ Z=... –¥–æ –≥—Ä–∞–≤—Ü—è Z=0)
            gameState.chickenZefas.forEach(zefa => {
                zefa.z += zefa.speed;
                // –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è –¥–ª—è —ñ–ª—é–∑—ñ—ó –≥–ª–∏–±–∏–Ω–∏ (2D —É 3D)
                const scale = 1 + (zefa.z / -100); 
                zefa.element.style.transform = `translateZ(${zefa.z}px) scale(${scale})`;
            });

            // 2. –†—É—Ö –ë—É—Ä–≥–µ—Ä—ñ–≤ (–≤—ñ–¥ –≥—Ä–∞–≤—Ü—è Z=0 –¥–æ –≥–ª–∏–±–∏–Ω–∏ Z=-600)
            gameState.bullets.forEach(bullet => {
                bullet.z -= bulletSpeed;
                // –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è –¥–ª—è —ñ–ª—é–∑—ñ—ó –≥–ª–∏–±–∏–Ω–∏
                const scale = 1 + (bullet.z / -100); 
                bullet.element.style.transform = `translateZ(${bullet.z}px) scale(${scale})`;
            });

            // 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ö–æ–ª—ñ–∑—ñ–π (–ë—É—Ä–≥–µ—Ä -> –ß—ñ–∫—î–Ω–ó—î—Ñ–∞)
            gameState.bullets = gameState.bullets.filter(bullet => {
                let hit = false;
                gameState.chickenZefas = gameState.chickenZefas.filter(zefa => {
                    
                    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–ª—ñ–∑—ñ—ó –ø–æ Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ñ (–≥–ª–∏–±–∏–Ω–∞)
                    if (bullet.z < zefa.z + zefa.speed && bullet.z > zefa.z - zefa.speed) {
                        
                        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–ª—ñ–∑—ñ—ó –ø–æ X/Y (–°–ø—Ä–æ—â–µ–Ω–∞ 2D-–∫–æ–ª—ñ–∑—ñ—è –Ω–∞ 3D-–ø–ª–æ—â–∏–Ω—ñ)
                        const zefaRect = zefa.element.getBoundingClientRect();
                        const bulletRect = bullet.element.getBoundingClientRect();
                        
                        // –°–ø—Ä–æ—â–µ–Ω–∞ –∫–æ–ª—ñ–∑—ñ—è X: –ø–æ—Ä—ñ–≤–Ω—é—î–º–æ –ø–æ–∑–∏—Ü—ñ—é –±—É—Ä–≥–µ—Ä—É –≤—ñ–¥–Ω–æ—Å–Ω–æ –≥—Ä–∞–≤—Ü—è –∑ –ø–æ–∑–∏—Ü—ñ—î—é –≤–æ—Ä–æ–≥–∞
                        const isHitX = bulletRect.left < zefaRect.right && bulletRect.right > zefaRect.left;
                        
                        if (isHitX) {
                            zefa.health -= bullet.damage;
                            bullet.element.remove();
                            hit = true; 

                            if (zefa.health <= 0) {
                                zefa.element.style.opacity = 0; // –ï—Ñ–µ–∫—Ç –∑–Ω–∏—â–µ–Ω–Ω—è
                                setTimeout(() => zefa.element.remove(), 200);
                                gameState.money += 5 * gameState.level; 
                                updateUI();
                                return false; 
                            }
                            return true; 
                        }
                    }
                    return true; 
                });
                return !hit && bullet.z > -600; // –í–∏–¥–∞–ª—è—î–º–æ –±—É—Ä–≥–µ—Ä, —è–∫—â–æ –≤–ª—É—á–∏–≤ –∞–±–æ –ø–æ–ª–µ—Ç—ñ–≤ –¥–∞–ª–µ–∫–æ
            });

            // 4. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ö–æ–ª—ñ–∑—ñ–π (–ß—ñ–∫—î–Ω–ó—î—Ñ–∞ -> –ì—Ä–∞–≤–µ—Ü—å)
            gameState.chickenZefas = gameState.chickenZefas.filter(zefa => {
                // –Ø–∫—â–æ –ß—ñ–∫—î–Ω–ó—î—Ñ–∞ –¥–æ—Å—è–≥ –≥—Ä–∞–≤—Ü—è (Z=0)
                if (zefa.z >= 0) {
                    gameState.health -= 20; // 20 –¥–µ–º–µ–¥–∂
                    updateUI();
                    zefa.element.remove();
                    
                    if (gameState.health <= 0) {
                        stopGame("–ó–Ñ–§–ê –ü–†–û–ì–†–ê–í! –¢–µ–±–µ –∑–∞–≥—Ä–∏–∑–ª–∏ –ß—ñ–∫—î–Ω–ó—î—Ñ–∞.");
                        showScreen('main-menu');
                        return false; 
                    }
                    return false; 
                }
                return true;
            });
        }
        
        updateUI();
        
        /* –í–ê–ñ–õ–ò–í–û: –î–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∫–æ–¥—É –ø–æ—Ç—Ä—ñ–±–µ–Ω —Ñ–∞–π–ª 'zefaburgerchickenzefa.png' */

    </script>
</body>
</html>
