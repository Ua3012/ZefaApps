<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó—î—Ñ–∞–ë—É—Ä–≥—î—Ä</title>
    <style>
        :root {
            --brown: #8B4513;
            --lettuce: #228B22;
            --cheese: #FFD700;
            --meat: #5E2F0D;
            --tomato: #FF6347;
            --cucumber: #32CD32;
            --sauce: #FF4500;
            --bg: #2c3e50;
        }

        body {
            font-family: 'Comic Sans MS', 'Courier New', cursive;
            background-color: var(--bg);
            color: white;
            display: flex;
            align-items: center; /* –¶–µ–Ω—Ç—Ä—É–≤–∞–Ω–Ω—è –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—ñ */
            justify-content: center; /* –¶–µ–Ω—Ç—Ä—É–≤–∞–Ω–Ω—è –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—ñ */
            min-height: 100vh;
            margin: 0;
            padding: 10px;
            box-sizing: border-box;
            overflow: hidden; /* –í–∏–º–∏–∫–∞—î–º–æ –∑–∞–π–≤–∏–π —Å–∫—Ä–æ–ª */
        }

        #game-container {
            background: #34495e;
            border: 5px solid #f1c40f;
            border-radius: 20px;
            padding: 20px;
            max-width: 950px;
            width: 100%;
            max-height: 95vh; /* –©–æ–± –Ω–µ –≤–∏–ª–∞–∑–∏–ª–æ –∑–∞ –µ–∫—Ä–∞–Ω */
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            text-align: center;
            position: relative;
            display: flex;
            flex-direction: column;
            overflow-y: auto; /* –°–∫—Ä–æ–ª —Ç—ñ–ª—å–∫–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –≥—Ä–∏, —è–∫—â–æ —Ç—Ä–µ–±–∞ */
        }

        #game-container.boss-active {
            background: #600;
            border-color: #f00;
            box-shadow: 0 0 50px #f00;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .timer-display {
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            font-weight: bold;
            color: #e74c3c;
            background: rgba(0,0,0,0.4);
            padding: 5px 15px;
            border-radius: 10px;
            border: 2px solid #e74c3c;
            min-width: 120px;
        }

        h1 {
            color: #f1c40f;
            text-shadow: 2px 2px #c0392b;
            font-size: clamp(1.4rem, 4vw, 2.2rem);
            margin: 0;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            font-size: 1.2rem;
            margin-bottom: 15px;
            padding: 5px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
        }

        .game-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            align-items: start;
        }

        /* –ú–æ–±—ñ–ª—å–Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü—ñ—è */
        @media (max-width: 750px) {
            .game-layout {
                grid-template-columns: 1fr;
            }
            #game-container {
                max-height: none;
                overflow-y: visible;
            }
            body {
                overflow-y: auto;
            }
        }

        .customer-zone {
            background: #ecf0f1;
            color: #2c3e50;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 10px;
            min-height: 70px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            border-left: 5px solid #f1c40f;
        }

        #burger-display {
            height: 300px;
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
            justify-content: flex-start;
            border-bottom: 10px solid #95a5a6;
            background: rgba(0,0,0,0.1);
            border-radius: 10px;
            padding-bottom: 5px;
        }

        .layer {
            width: 170px;
            height: 18px;
            margin: 1px 0;
            border-radius: 10px;
            border: 2px solid rgba(0,0,0,0.2);
        }
        .layer.bun { background: #d35400; height: 32px; border-radius: 20px 20px 5px 5px; }
        .layer.patty { background: var(--meat); height: 24px; }
        .layer.cheese { background: var(--cheese); height: 8px; width: 180px; }
        .layer.tomato { background: var(--tomato); height: 10px; }
        .layer.cucumber { background: var(--cucumber); height: 8px; width: 150px; }
        .layer.sauce { background: var(--sauce); height: 7px; border-radius: 50%; width: 110px; }

        .controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        button {
            padding: 15px 5px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            border: none;
            border-radius: 8px;
            transition: 0.2s;
            box-shadow: 0 4px 0 rgba(0,0,0,0.3);
        }

        button:active { transform: translateY(2px); box-shadow: 0 0 0; }

        .btn-bun { background: #d35400; color: white; }
        .btn-patty { background: var(--meat); color: white; }
        .btn-cheese { background: var(--cheese); }
        .btn-tomato { background: var(--tomato); }
        .btn-cucumber { background: var(--cucumber); }
        .btn-sauce { background: var(--sauce); color: white; }
        .btn-serve { background: #27ae60; color: white; grid-column: span 2; font-size: 1.6rem; margin-top: 10px; }
        .btn-clear { background: #c0392b; color: white; grid-column: span 2; padding: 8px; }

        #zefa-comment {
            margin-bottom: 15px;
            padding: 15px;
            font-weight: bold;
            color: #f1c40f;
            background: rgba(0,0,0,0.5);
            border-radius: 10px;
            min-height: 50px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-back {
            background: #555;
            color: white;
            padding: 8px 12px;
            font-size: 0.9rem;
            border-radius: 5px;
            text-decoration: none;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <div class="header-top">
            <a href="#" class="btn-back" onclick="history.back()">‚¨Ö –ù–∞–∑–∞–¥</a>
            <h1 id="game-title">–ó—î—Ñ–∞–ë—É—Ä–≥—î—Ä</h1>
            <div class="timer-display">–ß–ê–°: <span id="time-left">15</span>—Å</div>
        </div>

        <div class="stats">
            <div>üí∞ –ì—Ä–æ—à—ñ: <span id="money">100</span></div>
            <div>‚≠ê –ë–∞–ª–∏: <span id="score">0</span></div>
        </div>

        <div class="game-layout">
            <div class="visual-section">
                <div class="customer-zone">
                    <div id="customer-type"><b>–ü—Ä—ñ–¥—É—Ä–∞–∫ –∑–∞–π—à–æ–≤: ...</b></div>
                    <div id="order-text">–ñ–¥—É –∑–∞–∫–∞–∑...</div>
                </div>
                <div id="burger-display"></div>
            </div>

            <div class="controls-section">
                <div id="zefa-comment">–î—î–ª–∞–π –±—É—Ä–≥—î—Ä –±—ñ–≥–æ–º!</div>
                
                <div class="controls">
                    <button class="btn-bun" onclick="addIngredient('bun')">–ë—É–ª–æ—á–∫–∞</button>
                    <button class="btn-patty" onclick="addIngredient('patty')">–ö–∞—Ç–ª—î—Ç–∞</button>
                    <button class="btn-cheese" onclick="addIngredient('cheese')">–°–∏—Ä</button>
                    <button class="btn-tomato" onclick="addIngredient('tomato')">–ü–∞–º—ñ–¥–æ—Ä</button>
                    <button class="btn-cucumber" onclick="addIngredient('cucumber')">–ê–≥—É—Ä—î—Ü</button>
                    <button class="btn-sauce" onclick="addIngredient('sauce')">–°–æ—É—Å</button>
                    
                    <button class="btn-serve" onclick="serveBurger()">–ü–†–ê–î–ê–¢–¨</button>
                    <button class="btn-clear" onclick="clearBurger()">–í–ò–ö–Ü–ù–£–¢–¨</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let money = 100;
        let score = 0;
        let nextBossAt = 100;
        let currentBurger = ['bun'];
        let currentOrder = [];
        let customerType = '';
        let timeLeft = 15;
        let timerInterval;
        let isBossMode = false;
        let bossBurgersCount = 0;
        
        const ingredients = ['patty', 'cheese', 'tomato', 'cucumber', 'sauce'];
        const names = {'bun':'–ë—É–ª–æ—á–∫–∞','patty':'–ö–∞—Ç–ª—î—Ç–∞','cheese':'–°–∏—Ä','tomato':'–ü–∞–º—ñ–¥–æ—Ä','cucumber':'–ê–≥—É—Ä—î—Ü','sauce':'–°–æ—É—Å'};

        function startTimer(seconds) {
            clearInterval(timerInterval);
            timeLeft = seconds;
            document.getElementById('time-left').innerText = timeLeft;
            timerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById('time-left').innerText = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    handleTimeOut();
                }
            }, 1000);
        }

        function handleTimeOut() {
            if (isBossMode) {
                money = Math.floor(money * 0.5);
                score = Math.floor(score * 0.5);
                document.getElementById('zefa-comment').innerText = "–ê–∂–∏—Ä—î—Ç–∞ —Ç–µ–±–µ –∑–∂–µ—Ä! –ü–æ–ª–æ–≤–∏–Ω–∞ –∫–∞—Å–∏ –ø—Ä–æ–ø–∞–ª–∞!";
                endBossMode();
            } else {
                money -= 30;
                document.getElementById('zefa-comment').innerText = "–î–æ–≤–≥–æ –¥—É–º–∞—î—à! –ö–ª—ñ—î–Ω—Ç –ø–ª—é–Ω—É–≤ —ñ –ø—ñ—à–æ–≤.";
                updateUI();
                setTimeout(newCustomer, 1500);
            }
        }

        function newCustomer() {
            if (score >= nextBossAt) {
                startBossMode();
                return;
            }
            isBossMode = false;
            currentBurger = ['bun'];
            const types = ['normal', 'normal', 'degrod', 'balbes'];
            customerType = types[Math.floor(Math.random() * types.length)];
            
            currentOrder = ['bun'];
            let numItems = Math.floor(Math.random() * 3) + 2;
            for(let i=0; i<numItems; i++) {
                currentOrder.push(ingredients[Math.floor(Math.random() * ingredients.length)]);
            }
            currentOrder.push('bun');

            document.getElementById('customer-type').innerHTML = 
                customerType === 'normal' ? "<b>–ù–æ—Ä–º–∞–ª—å–Ω–∏–π –±–∞–ª–±—î—Å:</b>" : 
                customerType === 'degrod' ? "<b>–î—î–≥—Ä–æ–¥:</b>" : "<b>–ë–∞–ª–±—î—Å:</b>";
            
            document.getElementById('order-text').innerText = 
                customerType === 'degrod' ? "–•–∑ —à–æ —è —Ö–∞—á—É, —Ç–∏ –≤—Å—å–æ —Ä–∞–≤–Ω–æ –≥–∞–º–Ω–æ –ø—Ä—ñ–≥–∞—Ç–æ–≤—ñ—à!" : 
                customerType === 'balbes' ? "–î–∞–≤–∞–π –ª—é–±—É —Ñ—ñ–≥–Ω—é, —è –≤—Å–µ –∑—Ö–∞–≤–∞—é!" : 
                "–•–æ—á—É: " + currentOrder.map(i => names[i]).join(', ');
            
            renderBurger();
            startTimer(15);
        }

        function startBossMode() {
            isBossMode = true;
            bossBurgersCount = 0;
            document.getElementById('game-container').classList.add('boss-active');
            document.getElementById('customer-type').innerHTML = "<b style='color:red'>–ê–ñ–ò–†–Ñ–¢–ê –ü–†–Ü–ü–¨–û–†–°–Ø!</b>";
            document.getElementById('order-text').innerText = "–î–ê–í–ê–ô 3 –ì–Ü–ì–ê–ù–¢–°–¨–ö–ò–• –ë–£–†–ì–Ñ–†–ê –®–í–ò–î–ö–û!";
            document.getElementById('zefa-comment').innerText = "–ì–û–¢–£–ô –ë–û –í–û–ù–û –ù–ê–° –ó–ñ–ï–†–ï!";
            currentBurger = ['bun'];
            renderBurger();
            startTimer(15);
        }

        function endBossMode() {
            isBossMode = false;
            nextBossAt += 100;
            document.getElementById('game-container').classList.remove('boss-active');
            updateUI();
            setTimeout(newCustomer, 2000);
        }

        function addIngredient(ing) {
            if (currentBurger.length < 10) {
                currentBurger.push(ing);
                renderBurger();
            }
        }

        function clearBurger() {
            currentBurger = ['bun'];
            renderBurger();
            document.getElementById('zefa-comment').innerText = "–¢–∏ —à–æ –¥—É—Ä–∞–∫? –ü—Ä–æ–¥—É–∫—Ç–∏ –Ω–µ –±–µ–∑–∫—ñ–Ω–µ—á–Ω—ñ!";
        }

        function renderBurger() {
            const display = document.getElementById('burger-display');
            display.innerHTML = '';
            currentBurger.forEach(ing => {
                const div = document.createElement('div');
                div.className = `layer ${ing}`;
                display.appendChild(div);
            });
        }

        function serveBurger() {
            if (isBossMode) {
                if (currentBurger.length >= 6 && currentBurger[currentBurger.length-1] === 'bun') {
                    bossBurgersCount++;
                    document.getElementById('zefa-comment').innerText = `–ù–æ—Ä–º! –©–µ ${3 - bossBurgersCount} —à—Ç—É–∫!`;
                    currentBurger = ['bun'];
                    renderBurger();
                    if (bossBurgersCount >= 3) {
                        clearInterval(timerInterval);
                        money = Math.floor(money * 1.5);
                        score = Math.floor(score * 1.5);
                        document.getElementById('zefa-comment').innerText = "–ê–∂–∏—Ä—î—Ç–∞ –Ω–∞—ó–≤—Å—è —ñ –¥–∞–≤ —Ç—ñ–±—î –∫—É—á—É –¥—î–Ω—î–≥!";
                        endBossMode();
                    }
                } else {
                    document.getElementById('zefa-comment').innerText = "–¶–ï –ú–ê–õ–ò–ô –ë–£–†–ì–Ñ–†! –ê–ñ–ò–†–Ñ–¢–ê –•–û–ß–ï –ì–Ü–ì–ê–ù–¢–°–¨–ö–ò–ô!";
                }
                return;
            }

            let win = false;
            let msg = "";

            if (customerType === 'balbes') { win = true; msg = "–ë–∞–ª–±—î—Å –∑—Ö–∞–≤–∞–≤ —ñ –ø—Ä–æ—Å–∏—Ç—å —ñ—â–æ!"; }
            else if (customerType === 'degrod') { win = false; msg = "–î—î–≥—Ä–æ–¥ —Å–∫–∞–∑–∞–≤, —à–æ —Ç—É—Ç –º–∞–ª–æ –≥–∞–º–Ω–∞!"; }
            else {
                win = JSON.stringify(currentBurger) === JSON.stringify(currentOrder);
                msg = win ? "–î—î—Ä–∂–∏ –≥—Ä–æ—à–∏." : "–ù–∞—É—á—ñ—Å—å –≥–∞—Ç–æ–≤—ñ—Ç—å –¥—É—Ä–∞!";
            }

            clearInterval(timerInterval);
            if (win) { money += 50; score += 20; } 
            else { money -= 30; score -= 10; }

            document.getElementById('zefa-comment').innerText = msg;
            updateUI();
            if (money > 0) setTimeout(newCustomer, 1500);
            else checkGameOver();
        }

        function updateUI() {
            document.getElementById('money').innerText = money;
            document.getElementById('score').innerText = score;
        }

        function checkGameOver() {
            if (money <= 0) {
                clearInterval(timerInterval);
                document.getElementById('game-container').innerHTML = `<h1>–¢–ò –î–Ñ–ì–†–û–î!</h1><p>–ì—Ä–æ—à—ñ —Å–∫—ñ–Ω—á–∏–ª–∏—Å—å. –ê–∂–∏—Ä—î—Ç–∞ —Ç–µ–±–µ –ø–∞–±—ñ–ª.</p><button onclick="location.reload()" style="width:100%; font-size:2rem">–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑</button>`;
            }
        }

        newCustomer();
    </script>
</body>
</html>
