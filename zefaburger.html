<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó—î—Ñ–∞–ë—É—Ä–≥—î—Ä: –ß—ñ–∫—î–Ω–ó—î—Ñ–∞ –ê—Ç–∞–∫–∞</title>
    <style>
        /* –ë–∞–∑–æ–≤—ñ —Å—Ç–∏–ª—ñ */
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background-color: #f0f0e0;
            color: #333;
            text-align: center;
            margin: 0;
            padding: 0;
        }

        h1 {
            color: #d9534f;
            text-shadow: 2px 2px #fff;
        }

        .game-container {
            width: 90%;
            max-width: 800px;
            margin: 20px auto;
            border: 5px solid #5cb85c;
            border-radius: 15px;
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            min-height: 600px;
            position: relative;
        }

        /* –°—Ç–∏–ª—ñ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é */
        .menu-button {
            display: inline-block;
            padding: 15px 30px;
            margin: 10px;
            font-size: 24px;
            cursor: pointer;
            border: none;
            border-radius: 10px;
            transition: transform 0.1s;
        }

        .menu-button:hover {
            transform: scale(1.05);
        }

        #magaz-btn { background-color: #007bff; color: white; }
        #kukhnya-btn { background-color: #ffc107; color: #333; }
        #draka-btn { background-color: #d9534f; color: white; }

        .screen {
            display: none;
            padding: 20px 0;
            min-height: 400px;
            text-align: left;
        }

        /* –°—Ç–∏–ª—ñ –¥–ª—è –î—Ä–∞–∫–∏ (–Ü–º—ñ—Ç–∞—Ü—ñ—è 2.5D) */
        #draka-screen {
            background: linear-gradient(to top, #8bc34a, #4caf50); /* –¢—Ä–∞–≤–∞ */
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            text-align: center;
            padding: 0;
        }

        /* –Ü–º—ñ—Ç–∞—Ü—ñ—è 3D —Ñ–æ–Ω—É (–≥–æ—Ä–∏ —Ç–∞ –¥–µ—Ä–µ–≤–∞) */
        #draka-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: 
                url('https://i.imgur.com/kK7N1Jt.png') repeat-x bottom / 100px 100px, /* –Ü–º—ñ—Ç–∞—Ü—ñ—è –¥–µ—Ä–µ–≤ */
                linear-gradient(to top, #a1887f, #795548); /* –Ü–º—ñ—Ç–∞—Ü—ñ—è –≥—ñ—Ä */
            z-index: 1;
        }

        #game-area {
            position: relative;
            width: 100%;
            height: 450px; /* –í–∏—Å–æ—Ç–∞ —ñ–≥—Ä–æ–≤–æ—ó –∑–æ–Ω–∏ */
            z-index: 2;
        }
        
        /* 2 3–î —Å—Ç—ñ–Ω–∏, –º—ñ–∂ —è–∫–∏–º–∏ —Ç—Ä–µ–±–∞ –ø–µ—Ä–µ–±—ñ–≥–∞—Ç–∏ */
        .wall {
            position: absolute;
            bottom: 0;
            width: 100px;
            height: 100%;
            background-color: #7f8c8d;
            box-shadow: inset 0 0 10px #34495e;
            z-index: 3;
        }
        #wall-left { left: 0; }
        #wall-right { right: 0; }

        /* –ì—Ä–∞–≤–µ—Ü—å —Ç–∞ –≤–æ—Ä–æ–≥–∏ (2D –µ–ª–µ–º–µ–Ω—Ç–∏ —É 3D –ø—Ä–æ—Å—Ç–æ—Ä—ñ) */
        #player {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 70px;
            background-color: #3498db; /* –ê–≤–∞—Ç–∞—Ä –≥—Ä–∞–≤—Ü—è */
            border-radius: 10px;
            z-index: 10;
            line-height: 70px;
            color: white;
            font-weight: bold;
        }

        .chicken-zefa {
            position: absolute;
            width: 40px;
            height: 40px;
            background-image: url('zefaburgerchickenzefa.png'); /* –ü–æ—Ç—Ä—ñ–±–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è */
            background-size: cover;
            bottom: 100%; /* –ü–æ—á–∏–Ω–∞—é—Ç—å –∑ –≥–æ—Ä–∏ */
            left: 50%;
            transition: all 0.5s linear; /* –ü–ª–∞–≤–Ω–∏–π —Ä—É—Ö */
            z-index: 5;
        }

        .burger {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #e67e22; /* –ö–æ–ª—ñ—Ä –±—É—Ä–≥–µ—Ä–∞ */
            border-radius: 50%;
            z-index: 15;
            transition: top 0.3s linear;
        }
        
        .status-bar {
            background-color: #333;
            color: white;
            padding: 5px;
            border-radius: 5px;
            font-size: 14px;
            margin-bottom: 10px;
        }

    </style>
</head>
<body>

    <div class="game-container">
        <h1>–ó—î—Ñ–∞–ë—É—Ä–≥—î—Ä: –ß—ñ–∫—î–Ω–ó—î—Ñ–∞ –ê—Ç–∞–∫–∞</h1>

        <div id="main-menu" class="screen" style="display: block;">
            <h2>–ì–æ–ª–æ–≤–Ω–µ –ú–µ–Ω—é</h2>
            <button id="magaz-btn" class="menu-button" onclick="showScreen('magaz-screen')">üõí –ú–∞–≥–∞–∑</button>
            <button id="kukhnya-btn" class="menu-button" onclick="showScreen('kukhnya-screen')">üç≥ –ö—É—Ö–Ω—è</button>
            <button id="draka-btn" class="menu-button" onclick="showScreen('draka-screen'); startGame()">üí• –î—Ä–∞–∫–∞</button>
            
            <p class="status-bar">
                –ì—Ä–æ—à—ñ: $<span id="money">100</span> | –ë—É—Ä–≥–µ—Ä–∏: <span id="burgers">5</span> | –ó–¥–æ—Ä–æ–≤'—è: <span id="health">100</span>
            </p>
        </div>

        <div id="magaz-screen" class="screen">
            <h2>üõí –ú–∞–≥–∞–∑ –ó—î—Ñ–∞</h2>
            <p>–¢—É—Ç –º–æ–∂–Ω–∞ –∫—É–ø—É–≤–∞—Ç–∏ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏ —Ç–∞ –ø–æ–∫—Ä–∞—â—É–≤–∞—Ç–∏ —Å–≤–æ—ó –∑–¥—ñ–±–Ω–æ—Å—Ç—ñ.</p>
            
            <h3>–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è:</h3>
            <p>–®–≤–∏–¥–∫—ñ—Å—Ç—å –≥–æ—Ç—É–≤–∞–Ω–Ω—è: –†—ñ–≤–µ–Ω—å <span id="cook-speed-level">1</span> 
               <button onclick="buyUpgrade('cookSpeed', 50)">–ö—É–ø–∏—Ç–∏ (+50$, -1—Å–µ–∫)</button></p>
            
            <p>–ú–∞–∫—Å. –ó–¥–æ—Ä–æ–≤'—è: –†—ñ–≤–µ–Ω—å <span id="health-level">1</span> 
               <button onclick="buyUpgrade('maxHealth', 75)">–ö—É–ø–∏—Ç–∏ (+75$, +20 –ó–î)</button></p>
               
            <p>–î–µ–º–µ–¥–∂ –ë—É—Ä–≥–µ—Ä–∞: –†—ñ–≤–µ–Ω—å <span id="damage-level">1</span> 
               <button onclick="buyUpgrade('damage', 100)">–ö—É–ø–∏—Ç–∏ (+100$, +5 –î–ú–ì)</button></p>

            <h3>–Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏:</h3>
            <p>–ú'—è—Å–æ (–ü–æ—Ç—Ä—ñ–±–Ω–æ: 1): <button onclick="buyIngredient('meat', 10)">–ö—É–ø–∏—Ç–∏ (10$)</button></p>
            <p>–ë—É–ª–æ—á–∫–∏ (–ü–æ—Ç—Ä—ñ–±–Ω–æ: 2): <button onclick="buyIngredient('buns', 5)">–ö—É–ø–∏—Ç–∏ (5$)</button></p>
            
            <p><button class="menu-button" onclick="showScreen('main-menu')">‚Ü©Ô∏è –ù–∞–∑–∞–¥</button></p>
        </div>

        <div id="kukhnya-screen" class="screen">
            <h2>üç≥ –ö—É—Ö–Ω—è –ó—î—Ñ–∞</h2>
            <p>–¢—É—Ç –≥–æ—Ç—É—é—Ç—å—Å—è –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ñ –±—É—Ä–≥–µ—Ä–∏.</p>
            
            <p>–ú'—è—Å–æ: <span id="inv-meat">0</span> | –ë—É–ª–æ—á–∫–∏: <span id="inv-buns">0</span></p>
            
            <button onclick="cookBurger()" id="cook-btn">
                –ì–æ—Ç—É–≤–∞—Ç–∏ –ë—É—Ä–≥–µ—Ä (–ü–æ—Ç—Ä—ñ–±–Ω–æ: 1 –ú'—è—Å–æ, 2 –ë—É–ª–æ—á–∫–∏)
            </button>
            
            <p id="cooking-status"></p>
            
            <p><button class="menu-button" onclick="showScreen('main-menu')">‚Ü©Ô∏è –ù–∞–∑–∞–¥</button></p>
        </div>

        <div id="draka-screen" class="screen">
            <div class="status-bar">
                <p>–ß–∞—Å: <span id="timer">3:00</span> | –ó–¥–æ—Ä–æ–≤'—è –ì—Ä–∞–≤—Ü—è: <span id="player-health">100</span></p>
            </div>
            
            <div id="game-area">
                <div id="wall-left" class="wall"></div>
                <div id="wall-right" class="wall"></div>
                
                <div id="player">–ì–†–ê–í–ï–¶–¨</div>
            </div>
            
            <p>–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è: –ö–ª–∞–≤—ñ—à—ñ A/D –∞–±–æ —Å—Ç—Ä—ñ–ª–∫–∏ –¥–ª—è –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è, –ü—Ä–æ–±—ñ–ª/–ö–ª—ñ–∫ –¥–ª—è —Å—Ç—Ä—ñ–ª—å–±–∏.</p>

            <p><button class="menu-button" onclick="showScreen('main-menu'); stopGame()">‚Ü©Ô∏è –í—Ç–µ—á–∞ (–ù–∞–∑–∞–¥)</button></p>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –≥—Ä–∏
        let gameState = {
            money: 100,
            burgers: 5,
            health: 100,
            maxHealth: 100,
            
            // –Ü–Ω–≤–µ–Ω—Ç–∞—Ä
            inventory: {
                meat: 0,
                buns: 0
            },
            
            // –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è
            upgrades: {
                cookSpeed: { level: 1, cost: 50, value: 5000 }, // —á–∞—Å –≥–æ—Ç—É–≤–∞–Ω–Ω—è –≤ –º—Å
                maxHealth: { level: 1, cost: 75, value: 100 },
                damage: { level: 1, cost: 100, value: 10 } // –¥–µ–º–µ–¥–∂ –±—É—Ä–≥–µ—Ä–∞
            },
            
            // –ë–æ–π–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ
            gameRunning: false,
            chickenZefas: [],
            bullets: [],
            playerX: 50,
            level: 1,
            maxTime: 180, // 3 —Ö–≤–∏–ª–∏–Ω–∏
            currentTime: 180,
            chickenSpawnRate: 3000 // –º—Å
        };

        // –§—É–Ω–∫—Ü—ñ—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è UI (–≥—Ä–æ—à—ñ, –±—É—Ä–≥–µ—Ä–∏, –∑–¥–æ—Ä–æ–≤'—è)
        function updateUI() {
            document.getElementById('money').textContent = gameState.money;
            document.getElementById('burgers').textContent = gameState.burgers;
            document.getElementById('health').textContent = gameState.health;
            document.getElementById('player-health').textContent = gameState.health;

            document.getElementById('inv-meat').textContent = gameState.inventory.meat;
            document.getElementById('inv-buns').textContent = gameState.inventory.buns;
            
            // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä—ñ–≤–Ω—ñ–≤ –ø–æ–∫—Ä–∞—â–µ–Ω—å
            document.getElementById('cook-speed-level').textContent = gameState.upgrades.cookSpeed.level;
            document.getElementById('health-level').textContent = gameState.upgrades.maxHealth.level;
            document.getElementById('damage-level').textContent = gameState.upgrades.damage.level;
        }

        // –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –µ–∫—Ä–∞–Ω—ñ–≤
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.style.display = 'none';
            });
            document.getElementById(screenId).style.display = 'block';
            updateUI();
        }
        
        // --- –ú–ê–ì–ê–ó –õ–û–ì–Ü–ö–ê ---
        function buyIngredient(item, cost) {
            if (gameState.money >= cost) {
                gameState.money -= cost;
                gameState.inventory[item]++;
                updateUI();
                alert(`–ö—É–ø–ª–µ–Ω–æ ${item}!`);
            } else {
                alert("–ù–µ –≤–∏—Å—Ç–∞—á–∞—î –≥—Ä–æ—à–µ–π –ó—î—Ñ–∞!");
            }
        }
        
        function buyUpgrade(type, baseCost) {
            let upgrade = gameState.upgrades[type];
            let cost = baseCost * upgrade.level;
            
            if (gameState.money >= cost) {
                gameState.money -= cost;
                upgrade.level++;
                upgrade.cost = baseCost * upgrade.level; // –ó–±—ñ–ª—å—à–µ–Ω–Ω—è —Ü—ñ–Ω–∏
                
                // –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è
                if (type === 'maxHealth') {
                    upgrade.value += 20;
                    gameState.maxHealth = upgrade.value;
                    gameState.health = Math.min(gameState.health, gameState.maxHealth); // –Ω–µ –ø–µ—Ä–µ–≤–∏—â—É–≤–∞—Ç–∏ –º–∞–∫—Å.
                } else if (type === 'cookSpeed') {
                    upgrade.value = Math.max(500, upgrade.value - 500); // –ó–º–µ–Ω—à–µ–Ω–Ω—è —á–∞—Å—É –≥–æ—Ç—É–≤–∞–Ω–Ω—è, –∞–ª–µ –Ω–µ –º–µ–Ω—à–µ 0.5—Å
                } else if (type === 'damage') {
                    upgrade.value += 5;
                }

                updateUI();
                alert(`–ü–æ–∫—Ä–∞—â–µ–Ω–æ ${type}! –ù–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å: ${upgrade.level}`);
            } else {
                alert("–ù–µ –≤–∏—Å—Ç–∞—á–∞—î –≥—Ä–æ—à–µ–π –ó—î—Ñ–∞ –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è!");
            }
        }


        // --- –ö–£–•–ù–Ø –õ–û–ì–Ü–ö–ê ---
        function cookBurger() {
            const reqMeat = 1;
            const reqBuns = 2;
            
            if (gameState.inventory.meat >= reqMeat && gameState.inventory.buns >= reqBuns) {
                const cookTime = gameState.upgrades.cookSpeed.value;
                const cookBtn = document.getElementById('cook-btn');
                const status = document.getElementById('cooking-status');

                cookBtn.disabled = true;
                status.textContent = `–ì–æ—Ç—É–≤–∞–Ω–Ω—è... (${cookTime/1000} —Å–µ–∫)`;

                setTimeout(() => {
                    gameState.inventory.meat -= reqMeat;
                    gameState.inventory.buns -= reqBuns;
                    gameState.burgers += 1;
                    
                    status.textContent = "–ë—É—Ä–≥–µ—Ä –≥–æ—Ç–æ–≤–∏–π! üçî";
                    cookBtn.disabled = false;
                    updateUI();
                }, cookTime);
                
            } else {
                alert("–ù–µ –≤–∏—Å—Ç–∞—á–∞—î —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤ –ó—î—Ñ–∞! –ö—É–ø—É–π —É –º–∞–≥–∞–∑—ñ.");
            }
        }
        
        // --- –î–†–ê–ö–ê (–°–ò–ú–£–õ–Ø–¶–Ü–Ø –ë–û–Æ) –õ–û–ì–Ü–ö–ê ---
        let gameLoopInterval;
        let timerInterval;
        let spawnInterval;
        const playerSpeed = 10;
        const bulletSpeed = 10;
        
        function startGame() {
            if (gameState.burgers === 0) {
                alert("–ù–µ–º–∞—î –±—É—Ä–≥–µ—Ä—ñ–≤! –ì–æ—Ç—É–π –Ω–∞ –∫—É—Ö–Ω—ñ!");
                showScreen('main-menu');
                return;
            }
            if (gameState.gameRunning) return;
            
            // –°–∫–∏–¥–∞–Ω–Ω—è —Å—Ç–∞–Ω—É
            gameState.gameRunning = true;
            gameState.health = gameState.maxHealth;
            gameState.currentTime = gameState.maxTime;
            gameState.chickenZefas = [];
            
            // –ü–æ—á–∞—Ç–∫–æ–≤–µ —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è –≥—Ä–∞–≤—Ü—è
            const playerEl = document.getElementById('player');
            playerEl.style.left = '50%';
            gameState.playerX = 50;

            // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä—É
            timerInterval = setInterval(updateTimer, 1000);
            
            // –ó–∞–ø—É—Å–∫ —Å–ø–∞–≤–Ω—É –≤–æ—Ä–æ–≥—ñ–≤
            spawnInterval = setInterval(spawnChickenZefa, gameState.chickenSpawnRate / gameState.level); 
            
            // –ì–æ–ª–æ–≤–Ω–∏–π —Ü–∏–∫–ª –≥—Ä–∏
            gameLoopInterval = setInterval(gameLoop, 50); 
            
            document.addEventListener('keydown', handleInput);
            document.getElementById('game-area').addEventListener('click', shootBurger);
        }
        
        function stopGame(message = "–ë—ñ–π –∑–∞–∫—ñ–Ω—á–µ–Ω–æ.") {
            gameState.gameRunning = false;
            clearInterval(gameLoopInterval);
            clearInterval(timerInterval);
            clearInterval(spawnInterval);
            
            gameState.chickenZefas.forEach(zefa => zefa.remove());
            gameState.bullets.forEach(bullet => bullet.remove());
            gameState.chickenZefas = [];
            gameState.bullets = [];

            document.removeEventListener('keydown', handleInput);
            document.getElementById('game-area').removeEventListener('click', shootBurger);
            
            alert(message);
        }

        function updateTimer() {
            gameState.currentTime--;
            const minutes = Math.floor(gameState.currentTime / 60);
            const seconds = gameState.currentTime % 60;
            document.getElementById('timer').textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;

            if (gameState.currentTime <= 0) {
                stopGame("–ü–ï–†–ï–ú–û–ì–ê –ó–Ñ–§–ê! –¢–∏ –≤–∏—Å—Ç–æ—è–≤ 3 —Ö–≤–∏–ª–∏–Ω–∏!");
                gameState.level++;
                gameState.money += 200 * gameState.level;
                showScreen('main-menu');
            }
        }

        function spawnChickenZefa() {
            if (!gameState.gameRunning) return;

            const zefaEl = document.createElement('div');
            zefaEl.className = 'chicken-zefa';
            
            // –°–ø–∞–≤–Ω —É –≤–∏–ø–∞–¥–∫–æ–≤—ñ–π –ø–æ–∑–∏—Ü—ñ—ó –º—ñ–∂ —Å—Ç—ñ–Ω–∞–º–∏
            const areaWidth = document.getElementById('game-area').offsetWidth;
            const wallWidth = 100;
            const minX = wallWidth;
            const maxX = areaWidth - wallWidth - 40; // 40 - —à–∏—Ä–∏–Ω–∞ —á—ñ–∫–µ–Ω–∞
            const randomX = Math.floor(Math.random() * (maxX - minX + 1)) + minX;

            zefaEl.style.left = `${randomX}px`;
            zefaEl.style.top = `-40px`; // –ó–∞ –º–µ–∂–∞–º–∏ –µ–∫—Ä–∞–Ω—É
            
            const zefa = {
                id: Date.now(),
                element: zefaEl,
                health: 50 * gameState.level,
                x: randomX,
                y: 0,
                speed: 1 + (gameState.level * 0.5) // –ó–±—ñ–ª—å—à–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ –∑ —Ä—ñ–≤–Ω–µ–º
            };
            
            gameState.chickenZefas.push(zefa);
            document.getElementById('game-area').appendChild(zefaEl);
        }

        function handleInput(event) {
            const playerEl = document.getElementById('player');
            const gameArea = document.getElementById('game-area');
            const wallWidth = 100;
            const playerWidth = 50;
            const areaWidth = gameArea.offsetWidth;
            
            let newX = gameState.playerX;

            if (event.key === 'a' || event.key === 'A' || event.key === 'ArrowLeft') {
                newX = Math.max(wallWidth, gameState.playerX - playerSpeed); // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª—ñ–≤–æ—ó —Å—Ç—ñ–Ω–∏
            } else if (event.key === 'd' || event.key === 'D' || event.key === 'ArrowRight') {
                newX = Math.min(areaWidth - wallWidth - playerWidth, gameState.playerX + playerSpeed); // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤–æ—ó —Å—Ç—ñ–Ω–∏
            } else if (event.key === ' ') {
                event.preventDefault(); // –ó–∞–ø–æ–±—ñ–≥–∞—î –ø—Ä–æ–∫—Ä—É—á—É–≤–∞–Ω–Ω—é —Å—Ç–æ—Ä—ñ–Ω–∫–∏
                shootBurger();
            }
            
            gameState.playerX = newX;
            playerEl.style.left = `${gameState.playerX}px`;
        }

        function shootBurger() {
            if (!gameState.gameRunning || gameState.burgers <= 0) {
                alert("–ù–µ–º–∞—î –±—É—Ä–≥–µ—Ä—ñ–≤! –ì–æ—Ç—É–π!");
                return;
            }
            
            gameState.burgers--;
            updateUI();

            const playerEl = document.getElementById('player');
            const burgerEl = document.createElement('div');
            burgerEl.className = 'burger';
            
            const bulletX = gameState.playerX + 15; // –ü–æ–∑–∏—Ü—ñ—è –≥—Ä–∞–≤—Ü—è + –∑–º—ñ—â–µ–Ω–Ω—è
            
            burgerEl.style.left = `${bulletX}px`;
            burgerEl.style.top = `${playerEl.offsetTop}px`; 

            const bullet = {
                element: burgerEl,
                x: bulletX,
                y: playerEl.offsetTop,
                damage: gameState.upgrades.damage.value
            };

            gameState.bullets.push(bullet);
            document.getElementById('game-area').appendChild(burgerEl);
        }

        function gameLoop() {
            if (!gameState.gameRunning) return;

            // 1. –†—É—Ö –ß—ñ–∫—î–Ω–ó—î—Ñ–∞
            gameState.chickenZefas.forEach(zefa => {
                zefa.y += zefa.speed;
                zefa.element.style.top = `${zefa.y}px`;
            });

            // 2. –†—É—Ö –ë—É—Ä–≥–µ—Ä—ñ–≤
            gameState.bullets.forEach(bullet => {
                bullet.y -= bulletSpeed;
                bullet.element.style.top = `${bullet.y}px`;
            });

            // 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ö–æ–ª—ñ–∑—ñ–π (–ë—É—Ä–≥–µ—Ä -> –ß—ñ–∫—î–Ω–ó—î—Ñ–∞)
            gameState.bullets = gameState.bullets.filter(bullet => {
                let hit = false;
                gameState.chickenZefas = gameState.chickenZefas.filter(zefa => {
                    // –ü—Ä–æ—Å—Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–ª—ñ–∑—ñ—ó (–±—É–¥–µ –Ω–µ –¥—É–∂–µ —Ç–æ—á–Ω–æ—é, –∞–ª–µ –¥–ª—è –ø—Ä–∏–∫–ª–∞–¥—É –ø—ñ–¥—ñ–π–¥–µ)
                    const zefaRect = zefa.element.getBoundingClientRect();
                    const bulletRect = bullet.element.getBoundingClientRect();
                    
                    if (bulletRect.bottom < zefaRect.bottom && bulletRect.top > zefaRect.top && 
                        bulletRect.left < zefaRect.right && bulletRect.right > zefaRect.left) {
                        
                        zefa.health -= bullet.damage;
                        bullet.element.remove();
                        hit = true; 

                        if (zefa.health <= 0) {
                            zefa.element.remove();
                            gameState.money += 5; // –ù–∞–≥–æ—Ä–æ–¥–∞ –∑–∞ –∑–Ω–∏—â–µ–Ω–æ–≥–æ
                            updateUI();
                            return false; // –í–∏–¥–∞–ª—è—î–º–æ –ß—ñ–∫—î–Ω–ó—î—Ñ–∞
                        }
                        return true; // –ß—ñ–∫—î–Ω–ó—î—Ñ–∞ –≤–∏–∂–∏–≤
                    }
                    return true; // –ß—ñ–∫—î–Ω–ó—î—Ñ–∞ –≤–∏–∂–∏–≤
                });
                return !hit && bullet.y > 0; // –í–∏–¥–∞–ª—è—î–º–æ –±—É—Ä–≥–µ—Ä, —è–∫—â–æ –≤–ª—É—á–∏–≤ –∞–±–æ –ø–æ–ª–µ—Ç—ñ–≤ –∑–∞ –µ–∫—Ä–∞–Ω
            });

            // 4. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ö–æ–ª—ñ–∑—ñ–π (–ß—ñ–∫—î–Ω–ó—î—Ñ–∞ -> –ì—Ä–∞–≤–µ—Ü—å)
            gameState.chickenZefas = gameState.chickenZefas.filter(zefa => {
                const playerRect = document.getElementById('player').getBoundingClientRect();
                const zefaRect = zefa.element.getBoundingClientRect();
                
                // –Ø–∫—â–æ –ß—ñ–∫—î–Ω–ó—î—Ñ–∞ –¥–æ—Å—è–≥ –ª—ñ–Ω—ñ—ó –≥—Ä–∞–≤—Ü—è (–ø—Ä–æ—Å—Ç–∞ –∫–æ–ª—ñ–∑—ñ—è –∑–Ω–∏–∑—É)
                if (zefaRect.bottom >= playerRect.top) {
                    gameState.health -= 20; // 20 –¥–µ–º–µ–¥–∂
                    updateUI();
                    zefa.element.remove();
                    
                    if (gameState.health <= 0) {
                        stopGame("–ó–Ñ–§–ê –ü–†–û–ì–†–ê–í! –¢–µ–±–µ –∑–∞–≥—Ä–∏–∑–ª–∏ –ß—ñ–∫—î–Ω–ó—î—Ñ–∞.");
                        showScreen('main-menu');
                        return false; 
                    }
                    return false; // –í–∏–¥–∞–ª—è—î–º–æ –ß—ñ–∫—î–Ω–ó—î—Ñ–∞
                }
                return true;
            });
        }
        
        // –ü–æ—á–∞—Ç–∫–æ–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
        updateUI();
        
        /* –í–ê–ñ–õ–ò–í–û: –î–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∫–æ–¥—É –ø–æ—Ç—Ä—ñ–±–Ω–æ, —â–æ–± —Ñ–∞–π–ª 
        'zefaburgerchickenzefa.png' –∑–Ω–∞—Ö–æ–¥–∏–≤—Å—è –≤ —Ç—ñ–π –∂–µ –ø–∞–ø—Ü—ñ, —â–æ –π HTML-—Ñ–∞–π–ª. 
        –ê–±–æ –∑–∞–º—ñ–Ω—ñ—Ç—å –π–æ–≥–æ –Ω–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —ñ–Ω—à–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è.
        */

    </script>
</body>
</html>
